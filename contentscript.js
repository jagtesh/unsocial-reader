/**
* $dom library (v0.9.2b) copyright 2009, 2010, 2011 Keith Clark
* Licensed under the MIT License.
* http://www.keithclark.co.uk/
*
* Copyright 2011, 2012 Julien Wajsberg
* Licensed under the MIT License
* http://github.com/julienw/dollardom
*/
//(function(a){function q(a,b,c){var d=r(b),e=p[d];return e&&e.set?e.set(a,c):a.style[d]=c}function r(a){return o[a]||(o[a]=a.replace(l,function(a,b){return b.toUpperCase()}))}function s(a,c,d){var f;if(d===b){if(typeof c=="string")return e(a,c)||0;for(f in c)q(a,f,c[f])}else q(a,c,d)}function t(a){var c,d=[];if(typeof a=="string")while(a){c=a.match(k);if(c[0]==="")break;d.push({rel:c[1],uTag:(c[2]||"").toUpperCase(),id:c[3],classes:c[4]?c[4].split("."):b}),a=a.substring(c[0].length)}return d}function u(a,b){while((a=a.parentNode)&&a!==b);return a!==null}function v(a,b){function s(a,b){var c=b.id?(d=(a&&a.ownerDocument||g).getElementById(b.id))&&u(d,a)?[d]:[]:v(a.getElementsByTagName(b.uTag||"*")),d=c.length;if(d>0&&(b.id||b.classes))while(d--)w(c[d],b)||c.splice(d,1);return c}function v(a){var b,c,d;try{return Array.prototype.slice.call(a)}catch(e){b=[];for(c=0,d=a.length;c<d;c++)b.push(a[c]);return b}}function x(a){var b;for(b=c.length;b--;)if(c[b]===a)return i;return j}var c,d,e,f,h,k,l,m,n,o,p,q,r;c=[],d=[a],e=t(b),e.length||(e=[{}]);for(f=0,h=e.length;f<h;f++){o=e[f];for(k=0,l=d.length;k<l;k++){p=d[k];switch(o.rel){case">":r=p.childNodes;for(m=0,n=r.length;m<n;m++)w(r[m],o)&&c.push(r[m]);break;case"~":while(p=p.nextSibling)if(w(p,o)){if(x(p))break;c.push(p)}break;case"+":while((p=p.nextSibling)&&p.nodeType!==1);p&&w(p,o)&&c.push(p);break;default:q=s(p,o);if(f>0)for(m=0,n=q.length;m<n;m++)x(q[m])||c.push(q[m]);else c=c.concat(q)}}if(!c.length)return[];d=c.splice(0,c.length)}return d}function w(a,b){var c,d,e;return b?(c=b.uTag,d=b.id,e=b.classes,a.nodeType===1&&(!c||c===a.tagName)&&(!d||d===a.id)&&(!e||!!A(a,e))):!0}function x(a,b,c){c=t(c)[0];while(a&&!w(a,c)&&(a=a[b]));return a}function y(a,b){return b=t(b)[0],a&&w(a,b)}function z(a,b,c){return x(a[b],b,c)}function A(a,b){var c;if(a.className==="")return j;for(c=0;c<b.length;c++)if(!K(a,b[c]))return j;return i}function B(){function e(){var d,e;if(!b){b=!0,c&&(c=a.clearTimeout(c));for(d=0,e=m.length;d<e;d++)m[d]()}}function f(){try{h.doScroll("left")}catch(b){a.setTimeout(f,20);return}e()}var b,c,d;if(g.addEventListener)g.addEventListener("DOMContentLoaded",e,j),g.addEventListener("load",e,j);else if(g.attachEvent){g.attachEvent("onload",e),d=!1;try{d=a.frameElement===null}catch(i){}d&&h.doScroll&&f()}}function C(a,b){var c,d,e,f=t(a)[0],h=f.uTag;return h?(c=(b||g).createElement(h),d=f.id,e=f.classes,d&&(c.id=d),e&&(c.className=e.join(" ")),c):null}function D(b){/loaded|complete|interactive/.test(g.readyState)?a.setTimeout(b,0):m.push(b)}function E(a,b){return v(b||h,a)}function F(a,b){return z(a,"parentNode",b)}function G(a,b){return z(a,"nextSibling",b)}function H(a,b){return z(a,"previousSibling",b)}function I(a,b){return a=a.parentNode.firstChild,x(a,"nextSibling",b)}function J(a,b){return a=a.parentNode.lastChild,x(a,"previousSibling",b)}function K(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}function L(a,b){K(a,b)||(a.className+=" "+b)}function M(a,b){K(a,b)&&(a.className=a.className.replace(RegExp("(^|\\s)"+b+"(\\s|$)")," ").replace(/\s$/,""))}function N(a,b,c){(c?L:M)(a,b)}function O(a){return g.createTextNode(a)}function P(a,b,c){a.setAttribute(b,""+c)}function Q(a,b){return a.getAttribute(b)||null}function R(a,c,d){var e;if(typeof c=="object"){for(e in c)P(a,e,c[e]);return}if(d===b)return Q(a,c);P(a,c,d)}function S(a){while(a.firstChild)a.removeChild(a.firstChild)}function T(a,b){var c;b||(b=a,a=this);for(c in b)a[c]=b[c]}var b,c,d,e,f,g=a.document,h=g.documentElement,i=!0,j=!1,k=/^\s*([>+~])?\s*([*\w-]+)?(?:#([\w-]+))?(?:\.([\w.-]+))?\s*/,l=/-(\w)/g,m=[],n=[],o={"float":"cssFloat"in h.style?"cssFloat":"styleFloat"},p={borderWidth:{get:function(a){return e(a,"border-left-width")}},padding:{get:function(a){return e(a,"padding-left")}},margin:{get:function(a){return e(a,"margin-left")}}};!("opacity"in h.style)&&"filters"in h&&(p.opacity={set:function(a,b){var c=a.filters.alpha;c?c.opacity=b*100:a.style.filter+=" Alpha(opacity="+b*100+")"},get:function(a){var b=a.filters.alpha;return b?b.opacity/100:1}}),"clientWidth"in h&&(p.width={get:function(a){return a.style.width||a.clientWidth||a.offsetWidth}}),"clientHeight"in h&&(p.height={get:function(a){return a.style.height||a.clientHeight||a.offsetHeight}}),c=a.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(b,c,d){var e=b.uniqueID+c+d;n[e]=function(){var c=a.event;return c.target=c.srcElement||g,c.currentTarget=b,c.preventDefault=function(){c.returnValue=!1},c.stopPropagation=function(){c.cancelBubble=!0},d.call(b,c)},b.attachEvent("on"+c,n[e])},d=a.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){var d=a.uniqueID+b+c;a.detachEvent("on"+b,n[d]),delete n[d]},e=g.defaultView&&g.defaultView.getComputedStyle?function(a,b){var c=r(b),d=p[c];return d&&d.get?d.get(a):a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(b)}:function(a,b){var c=r(b),d=p[c];return d&&d.get?d.get(a):a.currentStyle[c]},f={create:C,onready:D,addEvent:c,removeEvent:d,get:E,descendants:v,ancestor:F,next:G,previous:H,first:I,last:J,empty:S,is:y,text:O,attr:R,hasClass:K,addClass:L,removeClass:M,toggleClass:N,style:s,extend:T},a.$dom=f,B()})(this);
(function(){function removex(a,b,c){var d=a.slice((c||b)+1||a.length);a.length=b<0?a.length+b:b;return a.push.apply(a,d)}function domstyle(a){return a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function cssstyle(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function getTag(a){return a.firstChild===null?{UL:"LI",DL:"DT",TR:"TD"}[a.tagName]||a.tagName:a.firstChild.tagName}function wrapHelper(a,b){if(typeof a==string)return wrap(a,getTag(b));else{var c=document.createElement("div");c.appendChild(a);return c}}function wrap(a,b){var c=document.createElement("div");c.innerHTML=a;return c}function clean(a){var b=/\S/;a.each(function(a){var c=a,d=c.firstChild,e=-1,f;while(d){f=d.nextSibling;if(d.nodeType==3&&!b.test(d.nodeValue)){c.removeChild(d)}else{d.nodeIndex=++e}d=f}})}function _getEventID(a){if(a._xuiEventID)return a._xuiEventID;return a._xuiEventID=++_getEventID.id}function _getRespondersForEvent(a,b){var c=cache[a]=cache[a]||{};return c[b]=c[b]||[]}function _createResponder(a,b,c){var d=_getEventID(a),e=_getRespondersForEvent(d,b);var f=function(b){if(c.call(a,b)===false){b.preventDefault();b.stopPropagation()}};f.guid=c.guid=c.guid||++_getEventID.id;f.handler=c;e.push(f);return f}function hasClass(a,b){return getClassRegEx(b).test(a.className)}function trim(a){return(a||"").replace(rtrim,"")}var undefined,xui,window=this,string=new String("string"),document=window.document,simpleExpr=/^#?([\w-]+)$/,idExpr=/^#/,tagExpr=/<([\w:]+)/,slice=function(a){return[].slice.call(a,0)};try{var a=slice(document.documentElement.childNodes)[0].nodeType}catch(e){slice=function(a){var b=[];for(var c=0;a[c];c++)b.push(a[c]);return b}}window.x$=window.xui=xui=function(a,b){return new xui.fn.find(a,b)};if(![].forEach){Array.prototype.forEach=function(a){var b=this.length||0,c=0,d=arguments[1];if(typeof a=="function"){for(;c<b;c++){a.call(d,this[c],c,this)}}}}xui.fn=xui.prototype={extend:function(a){for(var b in a){xui.fn[b]=a[b]}},find:function(a,b){var c=[],d;if(!a){return this}else if(b==undefined&&this.length){c=this.each(function(b){c=c.concat(slice(xui(a,b)))}).reduce(c)}else{b=b||document;if(typeof a==string){if(simpleExpr.test(a)&&b.getElementById&&b.getElementsByTagName){c=idExpr.test(a)?[b.getElementById(a.substr(1))]:b.getElementsByTagName(a);if(c[0]==null){c=[]}}else if(tagExpr.test(a)){d=document.createElement("i");d.innerHTML=a;slice(d.childNodes).forEach(function(a){c.push(a)})}else{if(window.Sizzle!==undefined){c=Sizzle(a,b)}else{c=b.querySelectorAll(a)}}c=slice(c)}else if(a instanceof Array){c=a}else if(a.nodeName||a===window){c=[a]}else if(a.toString()=="[object NodeList]"||a.toString()=="[object HTMLCollection]"||typeof a.length=="number"){c=slice(a)}}return this.set(c)},set:function(a){var b=xui();b.cache=slice(this.length?this:[]);b.length=0;[].push.apply(b,a);return b},reduce:function(a,b){var c=[],a=a||slice(this);a.forEach(function(a){if(c.indexOf(a,0,b)<0)c.push(a)});return c},has:function(a){var b=xui(a);return this.filter(function(){var a=this;var c=null;b.each(function(b){c=c||b==a});return c})},filter:function(a){var b=[];return this.each(function(c,d){if(a.call(c,d))b.push(c)}).set(b)},not:function(a){var b=slice(this),c=xui(a);if(!c.length){return this}return this.filter(function(a){var d;c.each(function(c){return d=b[a]!=c});return d})},each:function(a){for(var b=0,c=this.length;b<c;++b){if(a.call(this[b],this[b],b,this)===false)break}return this}};xui.fn.find.prototype=xui.fn;xui.extend=xui.fn.extend;xui.extend({html:function(location,html){clean(this);if(arguments.length==0){var i=[];this.each(function(a){i.push(a.innerHTML)});return i}if(arguments.length==1&&arguments[0]!="remove"){html=location;location="inner"}if(location!="remove"&&html&&html.each!==undefined){if(location=="inner"){var d=document.createElement("p");html.each(function(a){d.appendChild(a)});this.each(function(a){a.innerHTML=d.innerHTML})}else{var that=this;html.each(function(a){that.html(location,a)})}return this}return this.each(function(el){var parent,list,len,i=0;if(location=="inner"){if(typeof html==string||typeof html=="number"){el.innerHTML=html;list=el.getElementsByTagName("SCRIPT");len=list.length;for(;i<len;i++){eval(list[i].text)}}else{el.innerHTML="";el.appendChild(html)}}else{if(location=="remove"){el.parentNode.removeChild(el)}else{var elArray=["outer","top","bottom"],wrappedE=wrapHelper(html,elArray.indexOf(location)>-1?el:el.parentNode),children=wrappedE.childNodes;if(location=="outer"){el.parentNode.replaceChild(wrappedE,el)}else if(location=="top"){el.insertBefore(wrappedE,el.firstChild)}else if(location=="bottom"){el.insertBefore(wrappedE,null)}else if(location=="before"){el.parentNode.insertBefore(wrappedE,el)}else if(location=="after"){el.parentNode.insertBefore(wrappedE,el.nextSibling)}var parent=wrappedE.parentNode;while(children.length){parent.insertBefore(children[0],wrappedE)}parent.removeChild(wrappedE)}}})},attr:function(a,b){if(arguments.length==2){return this.each(function(c){if(c.tagName&&c.tagName.toLowerCase()=="input"&&a=="value")c.value=b;else if(c.setAttribute){if(a=="checked"&&(b==""||b==false||typeof b=="undefined"))c.removeAttribute(a);else c.setAttribute(a,b)}})}else{var c=[];this.each(function(b){if(b.tagName&&b.tagName.toLowerCase()=="input"&&a=="value")c.push(b.value);else if(b.getAttribute&&b.getAttribute(a)){c.push(b.getAttribute(a))}});return c}}});"inner outer top bottom remove before after".split(" ").forEach(function(a){xui.fn[a]=function(a){return function(b){return this.html(a,b)}}(a)});xui.events={};var cache={};xui.extend({on:function(a,b,c){return this.each(function(d){if(xui.events[a]){var e=_getEventID(d),f=_getRespondersForEvent(e,a);c=c||{};c.handler=function(b,c){xui.fn.fire.call(xui(this),a,c)};if(!f.length){xui.events[a].call(d,c)}}d.addEventListener(a,_createResponder(d,a,b),false)})},un:function(a,b){return this.each(function(c){var d=_getEventID(c),e=_getRespondersForEvent(d,a),f=e.length;while(f--){if(b===undefined||b.guid===e[f].guid){c.removeEventListener(a,e[f],false);removex(cache[d][a],f,1)}}if(cache[d][a].length===0)delete cache[d][a];for(var g in cache[d]){return}delete cache[d]})},fire:function(a,b){return this.each(function(c){if(c==document&&!c.dispatchEvent)c=document.documentElement;var d=document.createEvent("HTMLEvents");d.initEvent(a,true,true);d.data=b||{};d.eventName=a;c.dispatchEvent(d)})}});"click load submit touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend orientationchange".split(" ").forEach(function(a){xui.fn[a]=function(a){return function(b){return b?this.on(a,b):this.fire(a)}}(a)});xui(window).on("load",function(){if(!("onorientationchange"in document.body)){(function(a,b){xui(window).on("resize",function(){var c=window.innerWidth<a&&window.innerHeight>b&&window.innerWidth<window.innerHeight,d=window.innerWidth>a&&window.innerHeight<b&&window.innerWidth>window.innerHeight;if(c||d){window.orientation=c?0:90;xui("body").fire("orientationchange");a=window.innerWidth;b=window.innerHeight}})})(window.innerWidth,window.innerHeight)}});xui.touch=function(){try{return!!document.createEvent("TouchEvent").initTouchEvent}catch(a){return false}}();xui.ready=function(a){domReady(a)};_getEventID.id=1;xui.extend({tween:function(a,b){var c=function(b){var c={};"duration after easing".split(" ").forEach(function(b){if(a[b]){c[b]=a[b];delete a[b]}});return c};var d=function(a){var b=[],c;if(typeof a!=string){for(c in a){b.push(cssstyle(c)+":"+a[c])}b=b.join(";")}else{b=a}return b};var e=c(a);var f=d(a);return this.each(function(a){emile(a,f,e,b)})}});var rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;xui.extend({setStyle:function(a,b){a=domstyle(a);return this.each(function(c){c.style[a]=b})},getStyle:function(a,b){var c=function(a,b){return document.defaultView.getComputedStyle(a,"").getPropertyValue(cssstyle(b))};if(b===undefined){var d=[];this.each(function(b){d.push(c(b,a))});return d}else return this.each(function(d){b(c(d,a))})},addClass:function(a){var b=a.split(" ");return this.each(function(a){b.forEach(function(b){if(hasClass(a,b)===false){a.className=trim(a.className+" "+b)}})})},hasClass:function(a,b){var c=this,d=a.split(" ");return this.length&&function(){var a=true;c.each(function(c){d.forEach(function(d){if(hasClass(c,d)){if(b)b(c)}else a=false})});return a}()},removeClass:function(a){if(a===undefined)this.each(function(a){a.className=""});else{var b=a.split(" ");this.each(function(a){b.forEach(function(b){a.className=trim(a.className.replace(getClassRegEx(b),"$1"))})})}return this},toggleClass:function(a){var b=a.split(" ");return this.each(function(a){b.forEach(function(b){if(hasClass(a,b))a.className=trim(a.className.replace(getClassRegEx(b),"$1"));else a.className=trim(a.className+" "+b)})})},css:function(a){for(var b in a){this.setStyle(b,a[b])}return this}});var reClassNameCache={},getClassRegEx=function(a){var b=reClassNameCache[a];if(!b){b=new RegExp("(^|\\s+)"+a+"(?:\\s+|$)");reClassNameCache[a]=b}return b};xui.extend({xhr:function(a,b,c){function k(){if(f.readyState==4){delete e.xmlHttpRequest;if(f.status===0||f.status==200)f.handleResp();if(/^[45]/.test(f.status))f.handleError()}}if(!/^(inner|outer|top|bottom|before|after)$/.test(a)){c=b;b=a;a="inner"}var d=c?c:{};if(typeof c=="function"){d={};d.callback=c}var e=this,f=new XMLHttpRequest,g=d.method||"get",h=typeof d.async!="undefined"?d.async:true,i=d.data||null,j;f.queryString=i;f.open(g,b,h);f.setRequestHeader("X-Requested-With","XMLHttpRequest");if(g.toLowerCase()=="post")f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(j in d.headers){if(d.headers.hasOwnProperty(j)){f.setRequestHeader(j,d.headers[j])}}f.handleResp=d.callback!=null?d.callback:function(){e.html(a,f.responseText)};f.handleError=d.error&&typeof d.error=="function"?d.error:function(){};if(h){f.onreadystatechange=k;this.xmlHttpRequest=f}f.send(i);if(!h)k();return this}});(function(a,b){function e(a,b,c){return(a+(b-a)*c).toFixed(3)}function f(a,b,c){return a.substr(b,c||1)}function g(a,b,c){var d=2,e,g,h,i=[],j=[];while(e=3,g=arguments[d-1],d--)if(f(g,0)=="r"){g=g.match(/\d+/g);while(e--)i.push(~~g[e])}else{if(g.length==4)g="#"+f(g,1)+f(g,1)+f(g,2)+f(g,2)+f(g,3)+f(g,3);while(e--)i.push(parseInt(f(g,1+e*2,2),16))}while(e--){h=~~(i[e+3]+(i[e]-i[e+3])*c);j.push(h<0?0:h>255?255:h)}return"rgb("+j.join(",")+")"}function h(a){var b=parseFloat(a),c=a.replace(/^[\-\d\.]+/,"");return isNaN(b)?{v:c,f:g,u:""}:{v:b,f:e,u:c}}function i(a){var b,e={},f=d.length,g;c.innerHTML='<div style="'+a+'"></div>';b=c.childNodes[0].style;while(f--)if(g=b[d[f]])e[d[f]]=h(g);return e}var c=document.createElement("div"),d=("backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth "+"borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize "+"fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight "+"maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft "+"paddingRight paddingTop right textIndent top width wordSpacing zIndex").split(" ");b[a]=function(a,b,c,d){a=typeof a=="string"?document.getElementById(a):a;c=c||{};var e=i(b),f=a.currentStyle?a.currentStyle:getComputedStyle(a,null),g,j={},k=+(new Date),l=c.duration||200,m=k+l,n,o=c.easing||function(a){return-Math.cos(a*Math.PI)/2+.5};for(g in e)j[g]=h(f[g]);n=setInterval(function(){var b=+(new Date),f=b>m?1:(b-k)/l;for(g in e)a.style[g]=e[g].f(j[g].v,e[g].v,o(f))+e[g].u;if(b>m){clearInterval(n);c.after&&c.after();d&&setTimeout(d,1)}},10)}})("emile",this);!function(a,b){function m(a){l=1;while(a=c.shift()){a()}}var c=[],d,e,f=false,g=b.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l=/^loade|c/.test(b.readyState);b[j]&&b[j](i,e=function(){b.removeEventListener(i,e,f);m()},f);h&&b.attachEvent(k,d=function(){if(/^c/.test(b.readyState)){b.detachEvent(k,d);m()}});a["domReady"]=h?function(b){self!=top?l?b():c.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a["domReady"](b)},50)}b()}()}:function(a){l?a():c.push(a)}}(this,document)})()

var cutil = (function(w, d, c) {

	function getUrlParams(url) {
		var url_split = url.split('?');
		if (url_split.length == 2) {
			// url_split[1] contains the second part of URL, the param strings
			var param_split = url_split[1].split('&');
			var params = {};

			param_split.forEach(function(item){
				var item_split = item.split('=');
				// key => item_split[0], value => item_split[1]
				params[item_split[0]] = item_split[1];
			});

			return params;
		}
		return {};
	}

	return {
		getUrlParams: getUrlParams
	};
})(window, document, chrome);

(function($, cutil){
	function findExternalSocialLinks() {
		$('a').each(function(){
			if (this.href.indexOf('uiserver.php?') != -1) {
				var params = cutil.getUrlParams(this.href);
				var redirect_uri = decodeURIComponent(params["redirect_uri"]);
				console.log(redirect_uri);
				this.href = redirect_uri;
			}
		});
	}
	setInterval(findExternalSocialLinks, 1000);
})(xui, cutil);